<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>H·ªá Th·ªëng C·∫£nh B√°o Ng·∫≠p L·ª•t</title>

<style>
body{
    font-family: Arial, sans-serif;
    text-align:center;
    background:#f2f2f2;
    padding-top:60px;
}

.box{
    background:white;
    width:350px;
    margin:auto;
    padding:30px;
    border-radius:15px;
    box-shadow:0 0 20px rgba(0,0,0,0.1);
}

h1{
    color:#0077cc;
}

#value{
    font-size:48px;
    font-weight:bold;
    margin:20px 0;
}

.status{
    font-size:22px;
    font-weight:bold;
}
</style>
</head>

<body>

<div class="box">
    <h1>M·ª±c n∆∞·ªõc hi·ªán t·∫°i</h1>
    <div id="value">--</div>
    <div id="status" class="status">ƒêang k·∫øt n·ªëi...</div>
</div>

<script>

const token = "aDr0xW5cnhpazhuPPuIDUQWZGmtRtAhY"; // üëà D√ÅN TOKEN V√ÄO ƒê√ÇY
const pin = "V2";

async function updateData(){

    try{
        const response = await fetch(`https://blynk.cloud/external/api/get?token=${token}&${pin}`);
        const data = await response.text();

        // N·∫øu token sai
        if(data.includes("Invalid token")){
            document.getElementById("value").innerText = "--";
            document.getElementById("status").innerText = "Token kh√¥ng h·ª£p l·ªá!";
            document.getElementById("status").style.color = "red";
            return;
        }

        // N·∫øu m·∫•t m·∫°ng ho·∫∑c l·ªói kh√°c
        if(!data){
            document.getElementById("value").innerText = "--";
            document.getElementById("status").innerText = "Kh√¥ng c√≥ d·ªØ li·ªáu!";
            document.getElementById("status").style.color = "gray";
            return;
        }

        const value = parseInt(data);
        document.getElementById("value").innerText = value;

        const status = document.getElementById("status");

        if(value < 100){
            status.innerText = "An to√†n";
            status.style.color = "green";
        }
        else if(value < 300){
            status.innerText = "C·∫£nh b√°o";
            status.style.color = "orange";
        }
        else{
            status.innerText = "Nguy hi·ªÉm!";
            status.style.color = "red";
        }

    }catch(error){
        document.getElementById("value").innerText = "--";
        document.getElementById("status").innerText = "L·ªói k·∫øt n·ªëi!";
        document.getElementById("status").style.color = "gray";
        console.error(error);
    }
}

updateData();
setInterval(updateData,3000);

</script>

</body>
</html>
