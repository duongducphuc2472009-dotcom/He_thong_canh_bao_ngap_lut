<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Flood Monitoring</title>

<style>
body {
  font-family: Arial;
  text-align: center;
  background: #111;
  color: white;
}

.status {
  font-size: 30px;
  margin-top: 20px;
}

.value {
  font-size: 40px;
  margin-top: 10px;
}

.safe { color: #00ff00; }
.warning { color: #ffff00; }
.danger { color: #ff0000; }

</style>
</head>

<body>

<h1>HỆ THỐNG CẢNH BÁO LŨ</h1>

<div class="value" id="value">--</div>
<div class="status" id="status">--</div>

<script>

const token = "YOUR_AUTH_TOKEN";

function fetchData() {

  fetch(`https://blynk.cloud/external/api/get?token=${token}&V0`)
    .then(res => res.text())
    .then(data => {
      document.getElementById("value").innerText = "Mực nước: " + data;
    });

  fetch(`https://blynk.cloud/external/api/get?token=${token}&V1`)
    .then(res => res.text())
    .then(status => {

      const statusDiv = document.getElementById("status");
      statusDiv.innerText = status;

      statusDiv.className = "status";

      if (status.includes("AN TOAN"))
        statusDiv.classList.add("safe");

      else if (status.includes("NGUY HIEM") && !status.includes("RAT"))
        statusDiv.classList.add("warning");

      else if (status.includes("RAT"))
        statusDiv.classList.add("danger");
    });
}

setInterval(fetchData, 1000);

fetchData();

</script>

</body>
</html>
